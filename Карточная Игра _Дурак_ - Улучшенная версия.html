<!DOCTYPE html>
<!-- saved from url=(0074)file:///C:/Users/%D1%81%D0%B0%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0%D1%80/suk.html -->
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–æ—á–Ω–∞—è –ò–≥—Ä–∞ "–î—É—Ä–∞–∫" - –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a5f23, #0d3b1a);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            height: 95vh;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid #d4af37;
        }
        
        h1 {
            color: #f8de7e;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }
        
        .game-info {
            display: flex;
            justify-content: space-around;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .info-item {
            margin: 5px 10px;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            position: relative;
        }
        
        .player-area {
            background-color: rgba(139, 69, 19, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #8b4513;
            min-height: 200px;
            transition: all 0.3s;
        }
        
        .player-area.active-turn {
            background-color: rgba(139, 69, 19, 0.95);
            box-shadow: 0 0 20px #ffd700;
            animation: pulse-glow 2s infinite;
        }
        
        .player-area.inactive {
            opacity: 0.7;
            filter: brightness(0.7);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.2rem;
            color: #ffd700;
        }
        
        .bot-area {
            background-color: rgba(70, 130, 180, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #4682b4;
            min-height: 200px;
            transition: all 0.3s;
        }
        
        .bot-area.active-turn {
            background-color: rgba(70, 130, 180, 0.95);
            box-shadow: 0 0 20px #87CEEB;
            animation: pulse-glow-blue 2s infinite;
        }
        
        .center-area {
            flex-grow: 1;
            background-color: rgba(34, 139, 34, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #228b22;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .deck-area {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            align-items: center;
        }
        
        .deck {
            width: 150px;
            height: 100px;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px dashed #ccc;
            font-weight: bold;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .deck:hover {
            transform: scale(1.05);
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .trump-card {
            width: 70px;
            height: 100px;
            background-color: white;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: black;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
            margin-left: 20px;
        }
        
        .card-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            min-height: 120px;
        }
        
        .card {
            width: 70px;
            height: 100px;
            background-color: white;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: black;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
            transition: transform 0.2s, box-shadow 0.2s;
            user-select: none;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .card.selected {
            transform: translateY(-10px);
            box-shadow: 0 0 20px #ffd700;
            border: 2px solid #ffd700;
        }
        
        .card.playable {
            box-shadow: 0 0 15px #4CAF50;
            border: 2px solid #4CAF50;
            animation: pulse-green 2s infinite;
        }
        
        .card.defendable {
            box-shadow: 0 0 15px #2196F3;
            border: 2px solid #2196F3;
            animation: pulse-blue 2s infinite;
        }
        
        .card.unplayable {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .card.hearts, .card.diamonds {
            color: red;
        }
        
        .card.spades, .card.clubs {
            color: black;
        }
        
        .card-back {
            background: linear-gradient(45deg, #1a3c8b, #3a6bc9);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
        }
        
        .attack-area, .defend-area {
            width: 90%;
            min-height: 120px;
            border: 2px dashed rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px;
            justify-content: center;
            align-items: center;
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 25px;
            background-color: #d4af37;
            color: #000;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            min-width: 140px;
        }
        
        button:hover {
            background-color: #ffd700;
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            background-color: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
        }
        
        .status-message {
            text-align: center;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .card-value {
            font-size: 1.5rem;
        }
        
        .card-suit {
            font-size: 1.2rem;
        }
        
        .hidden {
            display: none;
        }
        
        .game-result {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 100;
            border: 3px solid #d4af37;
            width: 80%;
            max-width: 500px;
        }
        
        .game-result h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .rules-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #d4af37;
            max-width: 300px;
            z-index: 10;
        }
        
        .rules-toggle {
            background-color: #d4af37;
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
            width: 100%;
        }
        
        .rules-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .rules-content.active {
            max-height: 500px;
        }
        
        .rules-content ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .rules-content li {
            margin-bottom: 8px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .bot-level-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #d4af37;
            z-index: 10;
        }
        
        .level-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .level-btn {
            padding: 8px 15px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .level-btn.active {
            background-color: #d4af37;
            color: black;
        }
        
        .auto-highlight-toggle {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-play-instruction {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* YANGI QO'SHIMCHALAR */
        .defense-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            border: 1px solid #2196F3;
        }
        
        .turn-timer {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            border: 1px solid #d4af37;
        }
        
        .card-counter {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .defense-status {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(33, 150, 243, 0.3);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            border: 1px solid #2196F3;
        }
        
        .sound-toggle {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quick-action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }
        
        .quick-action-btn {
            padding: 8px 15px;
            background-color: rgba(33, 150, 243, 0.7);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        
        .quick-action-btn:hover {
            background-color: rgba(33, 150, 243, 0.9);
        }
        
        @keyframes pulse-green {
            0% { box-shadow: 0 0 10px #4CAF50; }
            50% { box-shadow: 0 0 20px #4CAF50; }
            100% { box-shadow: 0 0 10px #4CAF50; }
        }
        
        @keyframes pulse-blue {
            0% { box-shadow: 0 0 10px #2196F3; }
            50% { box-shadow: 0 0 20px #2196F3; }
            100% { box-shadow: 0 0 10px #2196F3; }
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 10px #ffd700; }
            50% { box-shadow: 0 0 20px #ffd700; }
            100% { box-shadow: 0 0 10px #ffd700; }
        }
        
        @keyframes pulse-glow-blue {
            0% { box-shadow: 0 0 10px #87CEEB; }
            50% { box-shadow: 0 0 20px #87CEEB; }
            100% { box-shadow: 0 0 10px #87CEEB; }
        }
        
        @keyframes card-move {
            0% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0); }
        }
        
        .card-move-animation {
            animation: card-move 0.5s ease-in-out;
        }
        
        @media (max-width: 768px) {
            .card {
                width: 50px;
                height: 75px;
            }
            
            .trump-card {
                width: 50px;
                height: 75px;
            }
            
            .card-value {
                font-size: 1.2rem;
            }
            
            .card-suit {
                font-size: 1rem;
            }
            
            .control-buttons {
                flex-wrap: wrap;
            }
            
            .rules-panel, .bot-level-selector, .auto-highlight-toggle, .sound-toggle {
                position: relative;
                top: auto;
                left: auto;
                right: auto;
                bottom: auto;
                margin: 10px auto;
                max-width: 100%;
            }
            
            .game-info {
                flex-direction: column;
                align-items: center;
            }
            
            .defense-counter, .turn-timer, .defense-status {
                position: relative;
                transform: none;
                margin: 5px auto;
                width: fit-content;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ü–∞–Ω–µ–ª—å –ø—Ä–∞–≤–∏–ª -->
        <div class="rules-panel">
            <button class="rules-toggle" onclick="toggleRules()">–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</button>
            <div class="rules-content" id="rules-content">
                <h3>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã "–î—É—Ä–∞–∫":</h3>
                <ul>
                    <li><strong>–¶–µ–ª—å:</strong> –ü–µ—Ä–≤—ã–º –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç</li>
                    <li><strong>–ù–∞—á–∞–ª–æ:</strong> –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç 6 –∫–∞—Ä—Ç. –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∫–æ–ª–æ–¥–µ.</li>
                    <li><strong>–ö–æ–∑—ã—Ä—å:</strong> –ü–æ—Å–ª–µ–¥–Ω—è—è –∫–∞—Ä—Ç–∞ –≤ –∫–æ–ª–æ–¥–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–∑—ã—Ä–µ–º. –ö–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤—Å–µ–≥–¥–∞ —Å–∏–ª—å–Ω–µ–µ –¥—Ä—É–≥–∏—Ö –º–∞—Å—Ç–µ–π.</li>
                    <li><strong>–ê—Ç–∞–∫–∞:</strong> –í—ã –º–æ–∂–µ—Ç–µ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ–π —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –∏ –∫–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–æ–ª–µ.</li>
                    <li><strong>–ó–∞—â–∏—Ç–∞:</strong> –í—ã –¥–æ–ª–∂–Ω—ã –∑–∞—â–∏—â–∞—Ç—å—Å—è –∫–∞—Ä—Ç–æ–π –±–æ–ª—å—à–µ–≥–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ —Ç–æ–π –∂–µ –º–∞—Å—Ç–∏ –∏–ª–∏ –∫–æ–∑—ã—Ä–µ–º.</li>
                    <li><strong>–í–∑—è—Ç—å –∫–∞—Ä—Ç—ã:</strong> –ï—Å–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è, –≤—ã –¥–æ–ª–∂–Ω—ã –≤–∑—è—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã —Å–æ —Å—Ç–æ–ª–∞.</li>
                    <li><strong>–ü–æ–±–µ–¥–∞:</strong> –ö–æ–≥–¥–∞ –∫–∞—Ä—Ç—ã –≤ –∫–æ–ª–æ–¥–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è, –∏–≥—Ä–æ–∫ –±–µ–∑ –∫–∞—Ä—Ç –ø–æ–±–µ–∂–¥–∞–µ—Ç.</li>
                </ul>
            </div>
        </div>
        
        <!-- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –±–æ—Ç–∞ -->
        <div class="bot-level-selector">
            <div>–£—Ä–æ–≤–µ–Ω—å –±–æ—Ç–∞:</div>
            <div class="level-buttons">
                <button class="level-btn active" onclick="setBotLevel(&#39;easy&#39;)" id="easy-btn">–õ–µ–≥–∫–∏–π</button>
                <button class="level-btn" onclick="setBotLevel(&#39;medium&#39;)" id="medium-btn">–°—Ä–µ–¥–Ω–∏–π</button>
                <button class="level-btn" onclick="setBotLevel(&#39;hard&#39;)" id="hard-btn">–°–ª–æ–∂–Ω—ã–π</button>
            </div>
        </div>
        
        <!-- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–∞—Ä—Ç -->
        <div class="auto-highlight-toggle">
            <input type="checkbox" id="auto-highlight" checked="" onchange="toggleAutoHighlight()">
            <label for="auto-highlight">–ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –∫–∞—Ä—Ç—ã</label>
        </div>
        
        <!-- –ó–≤—É–∫ -->
        <div class="sound-toggle">
            <input type="checkbox" id="sound-toggle" checked="" onchange="toggleSound()">
            <label for="sound-toggle">–ó–≤—É–∫</label>
        </div>
        
        <header>
            <h1>–ö–∞—Ä—Ç–æ—á–Ω–∞—è –ò–≥—Ä–∞ "–î—É—Ä–∞–∫" <span class="card-counter" id="game-version">v2.0</span></h1>
            <p>1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É ‚Üí 2. –ù–∞–∂–º–∏—Ç–µ "–ê—Ç–∞–∫–æ–≤–∞—Ç—å" –∏–ª–∏ "–ó–∞—â–∏—â–∞—Ç—å—Å—è" ‚Üí 3. –ù–∞–∂–º–∏—Ç–µ "–ì–æ—Ç–æ–≤–æ" –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ö–æ–¥–∞</p>
        </header>
        
        <div class="game-info">
            <div class="info-item">–ö–∞—Ä—Ç —É –≤–∞—Å: <span id="player-count">5</span></div>
            <div class="info-item">–ö–∞—Ä—Ç —É –±–æ—Ç–∞: <span id="bot-count">6</span></div>
            <div class="info-item">–û—Å—Ç–∞–ª–æ—Å—å –≤ –∫–æ–ª–æ–¥–µ: <span id="deck-count">24</span></div>
            <div class="info-item">–•–æ–¥: <span id="turn-indicator">–í–∞—à —Ö–æ–¥</span></div>
            <div class="info-item">–£—Ä–æ–≤–µ–Ω—å –±–æ—Ç–∞: <span id="bot-level-indicator">–õ–µ–≥–∫–∏–π</span></div>
        </div>
        
        <div class="game-area">
            <!-- –°—á–µ—Ç—á–∏–∫ –∑–∞—â–∏—Ç—ã –∏ —Ç–∞–π–º–µ—Ä -->
            <div class="defense-counter" id="defense-counter">
                –ó–∞—â–∏—â–µ–Ω–æ: <span id="defended-count">0</span>/<span id="attack-count">1</span>
            </div>
            
            <div class="turn-timer" id="turn-timer" style="border-color: rgb(244, 67, 54); background-color: rgba(244, 67, 54, 0.3);">
                –•–æ–¥: <span id="timer">0</span> —Å–µ–∫
            </div>
            
            <!-- –ë–æ—Ç (–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫) -->
            <div class="bot-area inactive" id="bot-area">
                <div class="player-header">
                    <span>ü§ñ –ë–æ—Ç (–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫)</span>
                    <span>–ö–∞—Ä—Ç: <span id="bot-cards-count">6</span></span>
                </div>
                <div class="card-container" id="bot-cards"><div class="card card-back">?</div><div class="card card-back">?</div><div class="card card-back">?</div><div class="card card-back">?</div><div class="card card-back">?</div><div class="card card-back">?</div></div>
            </div>
            
            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
            <div class="center-area">
                <div class="status-message" id="status-message">‚öîÔ∏è –í—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏: 6 ‚ô¶. –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥.</div>
                
                <div class="attack-area" id="attack-area"><div class="card diamonds card-move-animation">
                    <div class="card-value">6</div>
                    <div class="card-suit">‚ô¶</div>
                </div></div>
                
                <div class="defend-area" id="defend-area"><div style="color: rgba(255,255,255,0.7)">–ö–∞—Ä—Ç—ã –∑–∞—â–∏—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div></div>
                
                <!-- –°—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã -->
                <div class="defense-status" id="defense-status" style="background-color: rgba(76, 175, 80, 0.3); border-color: rgb(76, 175, 80);">
                    –°—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã: <span id="defense-status-text">–§–∞–∑–∞ –∞—Ç–∞–∫–∏</span>
                </div>
                
                <div class="deck-area">
                    <div class="deck" id="deck" onclick="drawCardFromDeck()" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤–∑—è—Ç—å –∫–∞—Ä—Ç—É (–µ—Å–ª–∏ –º–æ–∂–Ω–æ)">
                        <div class="card-back">?</div>
                        <div style="position: absolute; bottom: 5px; font-size: 0.8rem;">–û—Å—Ç–∞–ª–æ—Å—å: <span id="deck-count-small">24</span></div>
                    </div>
                    <div class="trump-card spades" id="trump-card">
                <div class="card-value">7</div>
                <div class="card-suit">‚ô†</div>
            </div>
                    <div style="margin-left: 20px; text-align: center;">
                        <div style="font-size: 0.9rem; margin-bottom: 5px;">–ö–æ–∑—ã—Ä—å:</div>
                        <div id="trump-suit-name" style="font-weight: bold; font-size: 1.1rem;">–ü–∏–∫–∏</div>
                    </div>
                </div>
            </div>
            
            <!-- –ò–≥—Ä–æ–∫ -->
            <div class="player-area active-turn" id="player-area">
                <div class="player-header">
                    <span>üéÆ –í—ã</span>
                    <span>–ö–∞—Ä—Ç: <span id="player-cards-count">5</span></span>
                </div>
                <div class="card-container" id="player-cards"><div class="card clubs" data-index="0">
                    <div class="card-value">10</div>
                    <div class="card-suit">‚ô£</div>
                </div><div class="card hearts" data-index="1">
                    <div class="card-value">A</div>
                    <div class="card-suit">‚ô•</div>
                </div><div class="card spades playable" data-index="2">
                    <div class="card-value">6</div>
                    <div class="card-suit">‚ô†</div>
                </div><div class="card clubs" data-index="3">
                    <div class="card-value">8</div>
                    <div class="card-suit">‚ô£</div>
                </div><div class="card diamonds" data-index="4">
                    <div class="card-value">A</div>
                    <div class="card-suit">‚ô¶</div>
                </div></div>
                
                <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="quick-action-buttons" id="quick-actions" style="display: none;">
                    <button class="quick-action-btn" onclick="defendWithLowest()">–ó–∞—â–∏—Ç–∞ (–º–∏–Ω)</button>
                    <button class="quick-action-btn" onclick="defendWithTrump()">–ó–∞—â–∏—Ç–∞ (–∫–æ–∑—ã—Ä—å)</button>
                    <button class="quick-action-btn" onclick="autoDefendAll()">–ê–≤—Ç–æ–∑–∞—â–∏—Ç–∞</button>
                </div>
                
                <div class="card-play-instruction" id="instruction-text">‚úÖ –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –±–æ—Ç—É.</div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="control-buttons">
                <button id="attack-btn" onclick="playerAttack()" disabled="">‚öîÔ∏è –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                <button id="defend-btn" onclick="playerDefend()" disabled="">üõ°Ô∏è –ó–∞—â–∏—â–∞—Ç—å—Å—è</button>
                <button id="take-btn" onclick="playerTake()" disabled="">üì• –í–∑—è—Ç—å –∫–∞—Ä—Ç—ã</button>
                <button id="pass-btn" onclick="playerPass()" disabled="">‚úÖ –ë–∏—Ç–æ</button>
                <button id="ready-btn" onclick="playerReady()" style="background-color: #4CAF50; color: white;">‚úÖ –ì–æ—Ç–æ–≤–æ</button>
                <button id="new-game-btn" onclick="startNewGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <button id="hint-btn" onclick="showHint()" disabled="">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                <button id="auto-select-btn" onclick="autoSelectCard()" disabled="">üéØ –ê–≤—Ç–æ–≤—ã–±–æ—Ä</button>
            </div>
        </div>
        
        <!-- –û–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–≥—Ä—ã -->
        <div class="game-result hidden" id="game-result">
            <h2 id="result-title">–ò–≥—Ä–∞ –û–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <p id="result-message"></p>
            <div style="margin-top: 20px;">
                <button onclick="startNewGame()" style="margin-right: 10px;">üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <button onclick="showStatistics()" style="background-color: #2196F3; color: white;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>
        </div>
        
        <!-- –û–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div class="game-result hidden" id="statistics-window">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã</h2>
            <div style="text-align: left; margin: 20px 0;">
                <p>–í—Å–µ–≥–æ –∏–≥—Ä: <span id="total-games">0</span></p>
                <p>–ü–æ–±–µ–¥: <span id="wins">0</span></p>
                <p>–ü–æ—Ä–∞–∂–µ–Ω–∏–π: <span id="losses">0</span></p>
                <p>–ù–∏—á—å–∏—Ö: <span id="draws">0</span></p>
                <p>–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥: <span id="win-rate">0%</span></p>
                <hr style="margin: 15px 0;">
                <p>–õ—É—á—à–∞—è —Å–µ—Ä–∏—è –ø–æ–±–µ–¥: <span id="best-streak">0</span></p>
                <p>–í—Å–µ–≥–æ —Å—ã–≥—Ä–∞–Ω–æ –∫–∞—Ä—Ç: <span id="total-cards-played">0</span></p>
            </div>
            <button onclick="closeStatistics()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let deck = [];
        let playerHand = [];
        let botHand = [];
        let attackCards = [];
        let defendCards = [];
        let trumpSuit = '';
        let isPlayerTurn = true;
        let isAttackPhase = true;
        let gameOver = false;
        let botLevel = 'easy';
        let playableCards = [];
        let defendableCards = [];
        let autoHighlightEnabled = true;
        let selectedCardIndex = -1;
        let cardsPlayedThisTurn = 0;
        let playerHasActed = false;
        let soundEnabled = true;
        let turnTimer = 30;
        let timerInterval;
        let gameStatistics = {
            totalGames: 0,
            wins: 0,
            losses: 0,
            draws: 0,
            bestWinStreak: 0,
            currentStreak: 0,
            totalCardsPlayed: 0
        };

        // –ó–Ω–∞—á–µ–Ω–∏—è –∏ –º–∞—Å—Ç–∏ –∫–∞—Ä—Ç
        const cardValues = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        const cardSuits = ['hearts', 'diamonds', 'clubs', 'spades'];
        const suitSymbols = {
            'hearts': '‚ô•',
            'diamonds': '‚ô¶',
            'clubs': '‚ô£',
            'spades': '‚ô†'
        };
        const suitNames = {
            'hearts': '–ß–µ—Ä–≤–∏',
            'diamonds': '–ë—É–±–Ω—ã',
            'clubs': '–¢—Ä–µ—Ñ—ã',
            'spades': '–ü–∏–∫–∏'
        };

        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        function initGame() {
            // –°–æ–∑–¥–∞–µ–º –∫–æ–ª–æ–¥—É –∫–∞—Ä—Ç
            deck = [];
            for (let suit of cardSuits) {
                for (let value of cardValues) {
                    deck.push({ suit, value });
                }
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫–∞—Ä—Ç—ã
            shuffleDeck(deck);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É
            trumpSuit = deck[deck.length - 1].suit;
            
            // –†–∞–∑–¥–∞–µ–º –∫–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞–º
            playerHand = deck.splice(0, 6);
            botHand = deck.splice(0, 6);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
            attackCards = [];
            defendCards = [];
            playableCards = [];
            defendableCards = [];
            selectedCardIndex = -1;
            isPlayerTurn = true;
            isAttackPhase = true;
            gameOver = false;
            cardsPlayedThisTurn = 0;
            playerHasActed = false;
            turnTimer = 30;
            
            // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–∞–π–º–µ—Ä
            if (timerInterval) clearInterval(timerInterval);
            
            // –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
            startTurnTimer();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            updateStatusMessage("–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –∞—Ç–∞–∫–∏.");
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–∑—ã—Ä–Ω—É—é –º–∞—Å—Ç—å
            document.getElementById('trump-suit-name').textContent = suitNames[trumpSuit];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
            updateInstruction();
            
            // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
            playSound('start');
        }

        // –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –∫–æ–ª–æ–¥—É
        function shuffleDeck(deckArray) {
            for (let i = deckArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deckArray[i], deckArray[j]] = [deckArray[j], deckArray[i]];
            }
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –±–æ—Ç–∞
        function setBotLevel(level) {
            botLevel = level;
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.getElementById('easy-btn').classList.remove('active');
            document.getElementById('medium-btn').classList.remove('active');
            document.getElementById('hard-btn').classList.remove('active');
            document.getElementById(level + '-btn').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            let levelName = '–õ–µ–≥–∫–∏–π';
            if (level === 'medium') levelName = '–°—Ä–µ–¥–Ω–∏–π';
            else if (level === 'hard') levelName = '–°–ª–æ–∂–Ω—ã–π';
            
            document.getElementById('bot-level-indicator').textContent = levelName;
            
            if (!gameOver) {
                updateStatusMessage(`–£—Ä–æ–≤–µ–Ω—å –±–æ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ ${levelName}.`);
                playSound('click');
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–∞—Ä—Ç
        function toggleAutoHighlight() {
            autoHighlightEnabled = document.getElementById('auto-highlight').checked;
            updateUI();
            playSound('click');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
        function toggleSound() {
            soundEnabled = document.getElementById('sound-toggle').checked;
            playSound('click');
        }

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫
        function playSound(type) {
            if (!soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                if (type === 'click') {
                    // –ó–≤—É–∫ –∫–ª–∏–∫–∞
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                }
                else if (type === 'card') {
                    // –ó–≤—É–∫ –∫–∞—Ä—Ç—ã
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 600;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                }
                else if (type === 'win') {
                    // –ó–≤—É–∫ –ø–æ–±–µ–¥—ã
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                }
                else if (type === 'start') {
                    // –ó–≤—É–∫ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(392.00, audioContext.currentTime); // G4
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime + 0.1); // C5
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                }
            } catch (e) {
                console.log("–ó–≤—É–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
            }
        }

        // –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å –ø—Ä–∞–≤–∏–ª
        function toggleRules() {
            const rulesContent = document.getElementById('rules-content');
            rulesContent.classList.toggle('active');
            
            const toggleBtn = document.querySelector('.rules-toggle');
            if (rulesContent.classList.contains('active')) {
                toggleBtn.textContent = '–ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞';
            } else {
                toggleBtn.textContent = '–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã';
            }
            playSound('click');
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        function updateUI() {
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞
            updatePlayerCards();
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—ã –±–æ—Ç–∞ (—Ä—É–±–∞—à–∫–æ–π –≤–≤–µ—Ä—Ö)
            updateBotCards();
            
            // –û–±–Ω–æ–≤–∏—Ç—å –æ–±–ª–∞—Å—Ç–∏ –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç—ã
            updateAttackArea();
            updateDefendArea();
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É
            updateTrumpCard();
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ
            document.getElementById('player-count').textContent = playerHand.length;
            document.getElementById('bot-count').textContent = botHand.length;
            document.getElementById('deck-count').textContent = deck.length;
            document.getElementById('deck-count-small').textContent = deck.length;
            document.getElementById('player-cards-count').textContent = playerHand.length;
            document.getElementById('bot-cards-count').textContent = botHand.length;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å, —á–µ–π —Å–µ–π—á–∞—Å —Ö–æ–¥
            const turnText = isPlayerTurn ? "–í–∞—à —Ö–æ–¥" : "–•–æ–¥ –±–æ—Ç–∞";
            document.getElementById('turn-indicator').textContent = turnText;
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –∑–∞—â–∏—Ç—ã
            document.getElementById('defended-count').textContent = defendCards.length;
            document.getElementById('attack-count').textContent = attackCards.length;
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã
            updateDefenseStatus();
            
            // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
            updateActivePlayerHighlight();
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
            updateButtons();
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –ª–∏ –∏–≥—Ä–∞
            checkGameEnd();
            
            // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∏–≥—Ä–∞–±–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
            highlightPlayableCards();
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
            updateInstruction();
            
            // –°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
            updateQuickActions();
        }

        // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
        function updateActivePlayerHighlight() {
            const playerArea = document.getElementById('player-area');
            const botArea = document.getElementById('bot-area');
            
            if (isPlayerTurn) {
                playerArea.classList.add('active-turn');
                botArea.classList.remove('active-turn');
                playerArea.classList.remove('inactive');
                botArea.classList.add('inactive');
            } else {
                botArea.classList.add('active-turn');
                playerArea.classList.remove('active-turn');
                botArea.classList.remove('inactive');
                playerArea.classList.add('inactive');
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã
        function updateDefenseStatus() {
            const statusElement = document.getElementById('defense-status-text');
            if (isAttackPhase) {
                statusElement.textContent = "–§–∞–∑–∞ –∞—Ç–∞–∫–∏";
                document.getElementById('defense-status').style.backgroundColor = "rgba(76, 175, 80, 0.3)";
                document.getElementById('defense-status').style.borderColor = "#4CAF50";
            } else {
                if (defendCards.length === attackCards.length) {
                    statusElement.textContent = "–í—Å–µ –∑–∞—â–∏—â–µ–Ω—ã";
                    document.getElementById('defense-status').style.backgroundColor = "rgba(76, 175, 80, 0.3)";
                    document.getElementById('defense-status').style.borderColor = "#4CAF50";
                } else if (defendCards.length > 0) {
                    statusElement.textContent = `–ó–∞—â–∏—â–µ–Ω–æ ${defendCards.length}/${attackCards.length}`;
                    document.getElementById('defense-status').style.backgroundColor = "rgba(255, 193, 7, 0.3)";
                    document.getElementById('defense-status').style.borderColor = "#FFC107";
                } else {
                    statusElement.textContent = "–ù–µ –∑–∞—â–∏—â–µ–Ω–æ";
                    document.getElementById('defense-status').style.backgroundColor = "rgba(244, 67, 54, 0.3)";
                    document.getElementById('defense-status').style.borderColor = "#F44336";
                }
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞
        function updatePlayerCards() {
            const playerCardsContainer = document.getElementById('player-cards');
            playerCardsContainer.innerHTML = '';
            
            // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–≥—Ä–∞–±–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã
            identifyPlayableCards();
            
            playerHand.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit}`;
                
                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞
                if (index === selectedCardIndex) {
                    cardElement.classList.add('selected');
                }
                
                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –∏–≥—Ä–∞–±–µ–ª—å–Ω–∞
                if (autoHighlightEnabled) {
                    if (isAttackPhase && playableCards.includes(index)) {
                        cardElement.classList.add('playable');
                    } else if (!isAttackPhase && defendableCards.includes(index)) {
                        cardElement.classList.add('defendable');
                    } else if (isPlayerTurn && !playerHasActed && (isAttackPhase || !isAttackPhase)) {
                        // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –≤–æ –≤—Ä–µ–º—è –∑–∞—â–∏—Ç—ã
                    }
                }
                
                cardElement.innerHTML = `
                    <div class="card-value">${card.value}</div>
                    <div class="card-suit">${suitSymbols[card.suit]}</div>
                `;
                cardElement.dataset.index = index;
                
                // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç—ã
                cardElement.addEventListener('click', () => selectCard(index));
                
                playerCardsContainer.appendChild(cardElement);
            });
        }

        // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–≥—Ä–∞–±–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã
        function identifyPlayableCards() {
            playableCards = [];
            defendableCards = [];
            
            if (!isPlayerTurn) return;
            
            if (isAttackPhase) {
                // –§–∞–∑–∞ –∞—Ç–∞–∫–∏
                if (attackCards.length === 0) {
                    // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞: –≤—Å–µ –∫–∞—Ä—Ç—ã –∏–≥—Ä–∞–±–µ–ª—å–Ω—ã
                    for (let i = 0; i < playerHand.length; i++) {
                        playableCards.push(i);
                    }
                } else {
                    // –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏: –∫–∞—Ä—Ç—ã —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –∏ –Ω–∞ —Å—Ç–æ–ª–µ
                    const tableValues = [...attackCards, ...defendCards].map(card => card.value);
                    
                    for (let i = 0; i < playerHand.length; i++) {
                        if (tableValues.includes(playerHand[i].value)) {
                            playableCards.push(i);
                        }
                    }
                }
            } else {
                // –§–∞–∑–∞ –∑–∞—â–∏—Ç—ã: –Ω–∞—Ö–æ–¥–∏–º –∫–∞—Ä—Ç—É, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å—Å—è
                if (attackCards.length > defendCards.length) {
                    const attackingCard = attackCards[defendCards.length];
                    
                    for (let i = 0; i < playerHand.length; i++) {
                        if (canDefend(attackingCard, playerHand[i])) {
                            defendableCards.push(i);
                        }
                    }
                }
            }
        }

        // –í—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É
        function selectCard(index) {
            if (!isPlayerTurn || gameOver) return;
            
            // –ï—Å–ª–∏ —É–∂–µ —Å–æ–≤–µ—Ä—à–∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –∏ –Ω–∞–∂–∞–ª–∏ "–ì–æ—Ç–æ–≤–æ", –Ω–µ–ª—å–∑—è –≤—ã–±–∏—Ä–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É
            if (playerHasActed) {
                updateStatusMessage("–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ' –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ.");
                return;
            }
            
            let isValidSelection = false;
            
            if (isAttackPhase) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è —Ñ–∞–∑—ã –∞—Ç–∞–∫–∏
                isValidSelection = playableCards.includes(index);
                if (!isValidSelection) {
                    updateStatusMessage("–≠—Ç—É –∫–∞—Ä—Ç—É —Å–µ–π—á–∞—Å –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞—Ç–∞–∫–∏!");
                    return;
                }
            } else {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è —Ñ–∞–∑—ã –∑–∞—â–∏—Ç—ã
                if (defendCards.length >= attackCards.length) {
                    updateStatusMessage("–í—Å–µ –∫–∞—Ä—Ç—ã —É–∂–µ –∑–∞—â–∏—â–µ–Ω—ã!");
                    return;
                }
                isValidSelection = defendableCards.includes(index);
                if (!isValidSelection) {
                    updateStatusMessage("–≠—Ç–æ–π –∫–∞—Ä—Ç–æ–π –Ω–µ–ª—å–∑—è –∑–∞—â–∏—â–∞—Ç—å—Å—è —Å–µ–π—á–∞—Å!");
                    return;
                }
            }
            
            // –ï—Å–ª–∏ —Ç–∞ –∂–µ –∫–∞—Ä—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑, –æ—Ç–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä
            if (selectedCardIndex === index) {
                selectedCardIndex = -1;
                updateUI();
                updateStatusMessage("–í—ã–±–æ—Ä –∫–∞—Ä—Ç—ã –æ—Ç–º–µ–Ω–µ–Ω.");
                return;
            }
            
            selectedCardIndex = index;
            updateUI();
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–µ
            const card = playerHand[index];
            let message = `–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ä—Ç–∞: ${card.value} ${suitSymbols[card.suit]}. `;
            
            if (isAttackPhase) {
                message += "–ù–∞–∂–º–∏—Ç–µ '–ê—Ç–∞–∫–æ–≤–∞—Ç—å'.";
            } else {
                message += "–ù–∞–∂–º–∏—Ç–µ '–ó–∞—â–∏—â–∞—Ç—å—Å—è'.";
            }
            
            updateStatusMessage(message);
            playSound('card');
        }

        // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∏–≥—Ä–∞–±–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã
        function highlightPlayableCards() {
            // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ updatePlayerCards()
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—ã –±–æ—Ç–∞ (—Ä—É–±–∞—à–∫–æ–π –≤–≤–µ—Ä—Ö)
        function updateBotCards() {
            const botCardsContainer = document.getElementById('bot-cards');
            botCardsContainer.innerHTML = '';
            
            for (let i = 0; i < botHand.length; i++) {
                const cardElement = document.createElement('div');
                cardElement.className = 'card card-back';
                cardElement.textContent = '?';
                
                // –ï—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π, –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
                if (botLevel === 'hard') {
                    const cardCount = document.createElement('div');
                    cardCount.style.position = 'absolute';
                    cardCount.style.bottom = '5px';
                    cardCount.style.fontSize = '0.7rem';
                    cardCount.style.color = 'white';
                    cardCount.textContent = `${i+1}`;
                    cardElement.appendChild(cardCount);
                }
                
                botCardsContainer.appendChild(cardElement);
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –∞—Ç–∞–∫–∏
        function updateAttackArea() {
            const attackArea = document.getElementById('attack-area');
            attackArea.innerHTML = '';
            
            attackCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit} card-move-animation`;
                cardElement.innerHTML = `
                    <div class="card-value">${card.value}</div>
                    <div class="card-suit">${suitSymbols[card.suit]}</div>
                `;
                attackArea.appendChild(cardElement);
            });
            
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç –∞—Ç–∞–∫–∏ –Ω–µ—Ç
            if (attackCards.length === 0) {
                attackArea.innerHTML = '<div style="color: rgba(255,255,255,0.7)">–ö–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>';
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –∑–∞—â–∏—Ç—ã
        function updateDefendArea() {
            const defendArea = document.getElementById('defend-area');
            defendArea.innerHTML = '';
            
            defendCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit} card-move-animation`;
                cardElement.innerHTML = `
                    <div class="card-value">${card.value}</div>
                    <div class="card-suit">${suitSymbols[card.suit]}</div>
                `;
                defendArea.appendChild(cardElement);
            });
            
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç –∑–∞—â–∏—Ç—ã –Ω–µ—Ç
            if (defendCards.length === 0) {
                defendArea.innerHTML = '<div style="color: rgba(255,255,255,0.7)">–ö–∞—Ä—Ç—ã –∑–∞—â–∏—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>';
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É
        function updateTrumpCard() {
            const trumpCard = document.getElementById('trump-card');
            
            // –ù–∞–π—Ç–∏ —Å–∞–º—É—é –º–ª–∞–¥—à—É—é –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É –≤ –∫–æ–ª–æ–¥–µ
            let lowestTrumpCard = null;
            for (let card of deck) {
                if (card.suit === trumpSuit) {
                    if (!lowestTrumpCard || cardValues.indexOf(card.value) < cardValues.indexOf(lowestTrumpCard.value)) {
                        lowestTrumpCard = card;
                    }
                }
            }
            
            // –ï—Å–ª–∏ –≤ –∫–æ–ª–æ–¥–µ –Ω–µ—Ç –∫–æ–∑—ã—Ä–Ω—ã—Ö –∫–∞—Ä—Ç
            if (!lowestTrumpCard) {
                lowestTrumpCard = { suit: trumpSuit, value: 'A' };
            }
            
            trumpCard.className = `trump-card ${lowestTrumpCard.suit}`;
            trumpCard.innerHTML = `
                <div class="card-value">${lowestTrumpCard.value}</div>
                <div class="card-suit">${suitSymbols[lowestTrumpCard.suit]}</div>
            `;
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        function updateInstruction() {
            const instructionText = document.getElementById('instruction-text');
            
            if (!isPlayerTurn) {
                instructionText.innerHTML = "ü§ñ –•–æ–¥ –±–æ—Ç–∞. –ñ–¥–∏—Ç–µ...";
                return;
            }
            
            if (playerHasActed) {
                instructionText.innerHTML = "‚úÖ –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –±–æ—Ç—É.";
                return;
            }
            
            if (isAttackPhase) {
                if (attackCards.length === 0) {
                    instructionText.innerHTML = "‚öîÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –ø–µ—Ä–≤–æ–π –∞—Ç–∞–∫–∏, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ '–ê—Ç–∞–∫–æ–≤–∞—Ç—å'.";
                } else {
                    instructionText.innerHTML = "‚öîÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∞—Ç–∞–∫–∏, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ '–ê—Ç–∞–∫–æ–≤–∞—Ç—å'.";
                }
            } else {
                if (attackCards.length > defendCards.length) {
                    const attackingCard = attackCards[defendCards.length];
                    instructionText.innerHTML = `üõ°Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç ${attackingCard.value}${suitSymbols[attackingCard.suit]}, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ '–ó–∞—â–∏—â–∞—Ç—å—Å—è'.`;
                } else {
                    instructionText.innerHTML = "‚úÖ –í—Å–µ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã. –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ'.";
                }
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        function updateQuickActions() {
            const quickActions = document.getElementById('quick-actions');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∑–∞—â–∏—Ç—ã –∏–≥—Ä–æ–∫–∞
            if (isPlayerTurn && !isAttackPhase && !playerHasActed && attackCards.length > defendCards.length) {
                quickActions.style.display = 'flex';
            } else {
                quickActions.style.display = 'none';
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        function updateButtons() {
            const attackBtn = document.getElementById('attack-btn');
            const defendBtn = document.getElementById('defend-btn');
            const takeBtn = document.getElementById('take-btn');
            const passBtn = document.getElementById('pass-btn');
            const readyBtn = document.getElementById('ready-btn');
            const hintBtn = document.getElementById('hint-btn');
            const autoSelectBtn = document.getElementById('auto-select-btn');
            
            // –ö–Ω–æ–ø–∫–∞ –∞—Ç–∞–∫–∏
            attackBtn.disabled = !isPlayerTurn || !isAttackPhase || selectedCardIndex === -1 || gameOver || playerHasActed;
            
            // –ö–Ω–æ–ø–∫–∞ –∑–∞—â–∏—Ç—ã - –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–æ–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å—Å—è, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–∞—Ä—Ç–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã
            defendBtn.disabled = !isPlayerTurn || isAttackPhase || gameOver || 
                                selectedCardIndex === -1 || defendCards.length >= attackCards.length;
            
            // –ö–Ω–æ–ø–∫–∞ "–í–∑—è—Ç—å –∫–∞—Ä—Ç—ã"
            takeBtn.disabled = !isPlayerTurn || isAttackPhase || gameOver || playerHasActed;
            
            // –ö–Ω–æ–ø–∫–∞ "–ë–∏—Ç–æ" - –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å, –µ—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∑–∞—â–∏—â–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞
            passBtn.disabled = !isPlayerTurn || gameOver || defendCards.length === 0 || playerHasActed || defendCards.length < attackCards.length;
            
            // –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤–æ" - –∞–∫—Ç–∏–≤–Ω–∞ –∫–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ —Å–æ–≤–µ—Ä—à–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ –ò–õ–ò –∫–æ–≥–¥–∞ –≤—Å–µ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã
            readyBtn.disabled = !isPlayerTurn || gameOver || (!playerHasActed && defendCards.length < attackCards.length);
            
            // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            hintBtn.disabled = !isPlayerTurn || gameOver || playerHasActed;
            
            // –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–≤—ã–±–æ—Ä–∞
            autoSelectBtn.disabled = !isPlayerTurn || gameOver || playerHasActed;
            
            // –ï—Å–ª–∏ –Ω–µ —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞, –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
            if (!isPlayerTurn) {
                attackBtn.disabled = true;
                defendBtn.disabled = true;
                takeBtn.disabled = true;
                passBtn.disabled = true;
                readyBtn.disabled = true;
                hintBtn.disabled = true;
                autoSelectBtn.disabled = true;
            }
        }

        // –ò–≥—Ä–æ–∫ –∞—Ç–∞–∫—É–µ—Ç
        function playerAttack() {
            if (!isPlayerTurn || !isAttackPhase || selectedCardIndex === -1 || playerHasActed) return;
            
            const card = playerHand[selectedCardIndex];
            
            // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å
            if (!playableCards.includes(selectedCardIndex)) {
                updateStatusMessage("–≠—Ç–æ–π –∫–∞—Ä—Ç–æ–π –Ω–µ–ª—å–∑—è –∞—Ç–∞–∫–æ–≤–∞—Ç—å!");
                selectedCardIndex = -1;
                updateUI();
                return;
            }
            
            // –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∞ –∞—Ç–∞–∫–∏, –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å
            if (attackCards.length > 0) {
                const hasMatchingValue = attackCards.some(c => c.value === card.value) || 
                                        defendCards.some(c => c.value === card.value);
                
                if (!hasMatchingValue) {
                    updateStatusMessage("–î–ª—è –∞—Ç–∞–∫–∏ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –∏ –Ω–∞ —Å—Ç–æ–ª–µ!");
                    selectedCardIndex = -1;
                    updateUI();
                    return;
                }
            }
            
            // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É –≤ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏
            attackCards.push(card);
            playerHand.splice(selectedCardIndex, 1);
            cardsPlayedThisTurn++;
            playerHasActed = true;
            gameStatistics.totalCardsPlayed++;
            
            updateStatusMessage(`‚öîÔ∏è –í—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏: ${card.value} ${suitSymbols[card.suit]}. –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥.`);
            playSound('card');
            
            selectedCardIndex = -1;
            updateUI();
        }

        // –ò–≥—Ä–æ–∫ –∑–∞—â–∏—â–∞–µ—Ç—Å—è - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
        function playerDefend() {
            if (!isPlayerTurn || isAttackPhase || selectedCardIndex === -1 || playerHasActed) return;
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞—â–∏—Ç—ã
            if (defendCards.length >= attackCards.length) {
                updateStatusMessage("–í—Å–µ –∫–∞—Ä—Ç—ã —É–∂–µ –∑–∞—â–∏—â–µ–Ω—ã!");
                return;
            }
            
            const defendingCard = playerHand[selectedCardIndex];
            const attackingCard = attackCards[defendCards.length];
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–µ—Ç –ª–∏ –∫–∞—Ä—Ç–∞ –∑–∞—â–∏—â–∞—Ç—å—Å—è
            if (canDefend(attackingCard, defendingCard)) {
                // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É –≤ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—Ç—ã
                defendCards.push(defendingCard);
                playerHand.splice(selectedCardIndex, 1);
                cardsPlayedThisTurn++;
                playerHasActed = true;
                gameStatistics.totalCardsPlayed++;
                
                updateStatusMessage(`üõ°Ô∏è –í—ã –∑–∞—â–∏—Ç–∏–ª–∏—Å—å: ${attackingCard.value}${suitSymbols[attackingCard.suit]} ‚Üí ${defendingCard.value}${suitSymbols[defendingCard.suit]}.`);
                playSound('card');
                
                // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å–µ –ª–∏ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã
                if (defendCards.length === attackCards.length) {
                    updateStatusMessage("‚úÖ –í—Å–µ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã! –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ'.");
                } else {
                    // –ï—Å–ª–∏ –µ—â–µ –µ—Å—Ç—å –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞—â–∏—Ç—ã, —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ä—Ç—É
                    setTimeout(() => {
                        playerHasActed = false;
                        selectedCardIndex = -1;
                        updateUI();
                        updateStatusMessage(`–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ª–µ–¥—É—é—â–µ–π –∞—Ç–∞–∫–∏ (${defendCards.length}/${attackCards.length} –∑–∞—â–∏—â–µ–Ω–æ).`);
                    }, 1000);
                }
                
                selectedCardIndex = -1;
                updateUI();
            } else {
                updateStatusMessage("‚ùå –≠—Ç–æ–π –∫–∞—Ä—Ç–æ–π –Ω–µ–ª—å–∑—è –∑–∞—â–∏—Ç–∏—Ç—å—Å—è. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –±–æ–ª—å—à–µ–≥–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ —Ç–æ–π –∂–µ –º–∞—Å—Ç–∏ –∏–ª–∏ –∫–æ–∑—ã—Ä—å.");
                selectedCardIndex = -1;
                updateUI();
                return;
            }
        }

        // –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç "–ì–æ—Ç–æ–≤–æ" - –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –±–æ—Ç—É - –ò–°–ü–†–ê–í–õ–ï–ù–û
        function playerReady() {
            if (!isPlayerTurn || gameOver) return;
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ —Å–æ–≤–µ—Ä—à–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–æ –≤—Å–µ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã, –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞—É–Ω–¥
            if (!playerHasActed && defendCards.length < attackCards.length) {
                updateStatusMessage("–°–Ω–∞—á–∞–ª–∞ –∑–∞—â–∏—Ç–∏—Ç–µ—Å—å –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç –∏–ª–∏ –≤–æ–∑—å–º–∏—Ç–µ –∫–∞—Ä—Ç—ã!");
                return;
            }
            
            if (isAttackPhase) {
                // –ü–æ—Å–ª–µ –∞—Ç–∞–∫–∏: –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –±–æ—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
                updateStatusMessage("‚öîÔ∏è –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∞—Ç–∞–∫—É. –¢–µ–ø–µ—Ä—å –±–æ—Ç –±—É–¥–µ—Ç –∑–∞—â–∏—â–∞—Ç—å—Å—è.");
                isPlayerTurn = false;
                isAttackPhase = false;
                playerHasActed = false;
                cardsPlayedThisTurn = 0;
                selectedCardIndex = -1;
                
                updateUI();
                
                // –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç
                setTimeout(() => {
                    botDefend();
                }, 1500);
            } else {
                // –ü–æ—Å–ª–µ –∑–∞—â–∏—Ç—ã: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å–µ –ª–∏ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã
                if (defendCards.length === attackCards.length) {
                    // –í—Å–µ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã - –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞—É–Ω–¥
                    updateStatusMessage("‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—â–∏—Ç–∏–ª–∏—Å—å! –†–∞—É–Ω–¥ –æ–∫–æ–Ω—á–µ–Ω.");
                    setTimeout(() => {
                        completeDefense();
                    }, 1000);
                } else {
                    // –ù–µ –≤—Å–µ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã - –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –≤–∑—è—Ç—å –∫–∞—Ä—Ç—ã
                    updateStatusMessage("‚ùå –í—ã –Ω–µ –∑–∞—â–∏—Ç–∏–ª–∏—Å—å –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç. –í—ã –¥–æ–ª–∂–Ω—ã –≤–∑—è—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã.");
                    setTimeout(() => {
                        playerTake();
                    }, 1000);
                }
            }
            playSound('click');
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–µ—Ç –ª–∏ –∫–∞—Ä—Ç–∞ –∑–∞—â–∏—â–∞—Ç—å—Å—è
        function canDefend(attackingCard, defendingCard) {
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –∑–∞—â–∏—Ç—ã - –∫–æ–∑—ã—Ä—å, –∞ –∫–∞—Ä—Ç–∞ –∞—Ç–∞–∫–∏ - –Ω–µ—Ç
            if (defendingCard.suit === trumpSuit && attackingCard.suit !== trumpSuit) {
                return true;
            }
            
            // –ï—Å–ª–∏ –æ–±–µ –∫–∞—Ä—Ç—ã –æ–¥–Ω–æ–π –º–∞—Å—Ç–∏
            if (defendingCard.suit === attackingCard.suit) {
                // –°—Ä–∞–≤–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
                const attackValueIndex = cardValues.indexOf(attackingCard.value);
                const defendValueIndex = cardValues.indexOf(defendingCard.value);
                return defendValueIndex > attackValueIndex;
            }
            
            return false;
        }

        // –í–∑—è—Ç—å –∫–∞—Ä—Ç—É –∏–∑ –∫–æ–ª–æ–¥—ã
        function drawCardFromDeck() {
            if (!isPlayerTurn || deck.length === 0 || playerHasActed) return;
            
            // –ï—Å–ª–∏ —Ñ–∞–∑–∞ –∞—Ç–∞–∫–∏ –∏ –Ω–µ –∞—Ç–∞–∫–æ–≤–∞–ª–∏, –Ω–µ–ª—å–∑—è –≤–∑—è—Ç—å –∫–∞—Ä—Ç—É
            if (isAttackPhase && attackCards.length === 0) {
                updateStatusMessage("–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∞—Ç–∞–∫–æ–≤–∞—Ç—å!");
                return;
            }
            
            // –ï—Å–ª–∏ —Ñ–∞–∑–∞ –∑–∞—â–∏—Ç—ã –∏ –Ω–µ –∑–∞—â–∏—â–∞–ª–∏—Å—å, –Ω–µ–ª—å–∑—è –≤–∑—è—Ç—å –∫–∞—Ä—Ç—É
            if (!isAttackPhase && defendCards.length === 0) {
                updateStatusMessage("–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è!");
                return;
            }
            
            // –í–∑—è—Ç—å –∫–∞—Ä—Ç—É
            if (playerHand.length < 6 && deck.length > 0) {
                const drawnCard = deck.shift();
                playerHand.push(drawnCard);
                updateStatusMessage(`üì• –í—ã –≤–∑—è–ª–∏ –∫–∞—Ä—Ç—É: ${drawnCard.value} ${suitSymbols[drawnCard.suit]}! –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥.`);
                playerHasActed = true;
                playSound('card');
                updateUI();
            }
        }

        // –ó–∞—â–∏—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        function completeDefense() {
            // –û—á–∏—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç—ã
            attackCards = [];
            defendCards = [];
            
            // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫–∏
            refillHands();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ö–æ–¥ –±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∞–∑–µ –∞—Ç–∞–∫–∏
            isPlayerTurn = false;
            isAttackPhase = true;
            playerHasActed = false;
            cardsPlayedThisTurn = 0;
            selectedCardIndex = -1;
            
            updateUI();
            
            // –ë–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –∞—Ç–∞–∫—É
            setTimeout(() => {
                botAttack();
            }, 1500);
        }

        // –ò–≥—Ä–æ–∫ –±–µ—Ä–µ—Ç –∫–∞—Ä—Ç—ã
        function playerTake() {
            if (!isPlayerTurn || isAttackPhase || playerHasActed) return;
            
            // –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç—ã –≤ —Ä—É–∫—É –∏–≥—Ä–æ–∫–∞
            playerHand = playerHand.concat(attackCards, defendCards);
            attackCards = [];
            defendCards = [];
            selectedCardIndex = -1;
            playerHasActed = true;
            
            updateStatusMessage("üì• –í—ã –≤–∑—è–ª–∏ –≤—Å–µ –∫–∞—Ä—Ç—ã. –ù–∞–∂–º–∏—Ç–µ '–ì–æ—Ç–æ–≤–æ', —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –±–æ—Ç—É.");
            playSound('card');
            
            // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫–∏
            refillHands();
            
            updateUI();
        }

        // –ò–≥—Ä–æ–∫ –≥–æ–≤–æ—Ä–∏—Ç "–ë–∏—Ç–æ"
        function playerPass() {
            if (!isPlayerTurn || attackCards.length === 0 || playerHasActed || defendCards.length < attackCards.length) return;
            
            // –ó–∞—â–∏—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
            updateStatusMessage("‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—â–∏—Ç–∏–ª–∏—Å—å! '–ë–∏—Ç–æ'!");
            completeDefense();
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∫–∞—Ä—Ç—ã
        function autoSelectCard() {
            if (!isPlayerTurn || gameOver || playerHasActed) return;
            
            let bestCardIndex = -1;
            
            if (isAttackPhase) {
                // –§–∞–∑–∞ –∞—Ç–∞–∫–∏: –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é –∫–∞—Ä—Ç—É –¥–ª—è –∞—Ç–∞–∫–∏
                if (playableCards.length > 0) {
                    // –°–∞–º–∞—è –º–ª–∞–¥—à–∞—è –Ω–µ–∫–æ–∑—ã—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞
                    for (let i = 0; i < playableCards.length; i++) {
                        const index = playableCards[i];
                        const card = playerHand[index];
                        
                        if (card.suit !== trumpSuit) {
                            if (bestCardIndex === -1 || cardValues.indexOf(card.value) < cardValues.indexOf(playerHand[bestCardIndex].value)) {
                                bestCardIndex = index;
                            }
                        }
                    }
                    
                    // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                    if (bestCardIndex === -1 && playableCards.length > 0) {
                        bestCardIndex = playableCards[0];
                    }
                }
            } else {
                // –§–∞–∑–∞ –∑–∞—â–∏—Ç—ã: –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
                if (defendableCards.length > 0) {
                    // –°–∞–º–∞—è –º–ª–∞–¥—à–∞—è –Ω–µ–∫–æ–∑—ã—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞
                    for (let i = 0; i < defendableCards.length; i++) {
                        const index = defendableCards[i];
                        const card = playerHand[index];
                        
                        if (card.suit !== trumpSuit) {
                            if (bestCardIndex === -1 || cardValues.indexOf(card.value) < cardValues.indexOf(playerHand[bestCardIndex].value)) {
                                bestCardIndex = index;
                            }
                        }
                    }
                    
                    // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                    if (bestCardIndex === -1 && defendableCards.length > 0) {
                        bestCardIndex = defendableCards[0];
                    }
                }
            }
            
            if (bestCardIndex !== -1) {
                selectedCardIndex = bestCardIndex;
                const card = playerHand[bestCardIndex];
                updateStatusMessage(`üéØ –ê–≤—Ç–æ–≤—ã–±–æ—Ä: ${card.value} ${suitSymbols[card.suit]}`);
                updateUI();
                playSound('click');
            } else {
                updateStatusMessage("–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∫–∞—Ä—Ç—ã –¥–ª—è –∞–≤—Ç–æ–≤—ã–±–æ—Ä–∞.");
            }
        }

        // –ó–∞—â–∏—Ç–∏—Ç—å—Å—è —Å–∞–º–æ–π –º–ª–∞–¥—à–µ–π –∫–∞—Ä—Ç–æ–π
        function defendWithLowest() {
            if (!isPlayerTurn || isAttackPhase || playerHasActed || defendCards.length >= attackCards.length) return;
            
            const attackingCard = attackCards[defendCards.length];
            let bestDefenseIndex = -1;
            
            // –ù–∞–π—Ç–∏ —Å–∞–º—É—é –º–ª–∞–¥—à—É—é –Ω–µ–∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
            for (let i = 0; i < playerHand.length; i++) {
                if (canDefend(attackingCard, playerHand[i]) && playerHand[i].suit !== trumpSuit) {
                    if (bestDefenseIndex === -1 || cardValues.indexOf(playerHand[i].value) < cardValues.indexOf(playerHand[bestDefenseIndex].value)) {
                        bestDefenseIndex = i;
                    }
                }
            }
            
            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –Ω–µ–∫–æ–∑—ã—Ä–Ω—É—é, –∏—â–µ–º –∫–æ–∑—ã—Ä–Ω—É—é
            if (bestDefenseIndex === -1) {
                for (let i = 0; i < playerHand.length; i++) {
                    if (canDefend(attackingCard, playerHand[i])) {
                        if (bestDefenseIndex === -1 || cardValues.indexOf(playerHand[i].value) < cardValues.indexOf(playerHand[bestDefenseIndex].value)) {
                            bestDefenseIndex = i;
                        }
                    }
                }
            }
            
            if (bestDefenseIndex !== -1) {
                selectedCardIndex = bestDefenseIndex;
                updateUI();
                playerDefend();
            } else {
                updateStatusMessage("–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞—â–∏—Ç—ã.");
            }
        }

        // –ó–∞—â–∏—Ç–∏—Ç—å—Å—è –∫–æ–∑—ã—Ä–µ–º
        function defendWithTrump() {
            if (!isPlayerTurn || isAttackPhase || playerHasActed || defendCards.length >= attackCards.length) return;
            
            const attackingCard = attackCards[defendCards.length];
            let trumpDefenseIndex = -1;
            
            // –ù–∞–π—Ç–∏ –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
            for (let i = 0; i < playerHand.length; i++) {
                if (playerHand[i].suit === trumpSuit && canDefend(attackingCard, playerHand[i])) {
                    if (trumpDefenseIndex === -1 || cardValues.indexOf(playerHand[i].value) < cardValues.indexOf(playerHand[trumpDefenseIndex].value)) {
                        trumpDefenseIndex = i;
                    }
                }
            }
            
            if (trumpDefenseIndex !== -1) {
                selectedCardIndex = trumpDefenseIndex;
                updateUI();
                playerDefend();
            } else {
                updateStatusMessage("–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∫–æ–∑—ã—Ä—è –¥–ª—è –∑–∞—â–∏—Ç—ã.");
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç
        function autoDefendAll() {
            if (!isPlayerTurn || isAttackPhase || playerHasActed) return;
            
            let allDefended = true;
            
            // –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∫–∞—Ä—Ç
            while (defendCards.length < attackCards.length && allDefended) {
                const attackingCard = attackCards[defendCards.length];
                let foundDefense = false;
                
                for (let i = 0; i < playerHand.length; i++) {
                    if (canDefend(attackingCard, playerHand[i])) {
                        // –í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞—â–∏—â–∞–µ–º—Å—è —ç—Ç–æ–π –∫–∞—Ä—Ç–æ–π
                        defendCards.push(playerHand[i]);
                        playerHand.splice(i, 1);
                        gameStatistics.totalCardsPlayed++;
                        foundDefense = true;
                        break;
                    }
                }
                
                if (!foundDefense) {
                    allDefended = false;
                    // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    playerHand = playerHand.concat(defendCards);
                    defendCards = [];
                    break;
                }
            }
            
            if (allDefended && defendCards.length === attackCards.length) {
                updateStatusMessage("‚úÖ –ê–≤—Ç–æ–∑–∞—â–∏—Ç–∞ —É—Å–ø–µ—à–Ω–∞! –í—Å–µ –∫–∞—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã.");
                playerHasActed = true;
                updateUI();
                playSound('card');
            } else {
                updateStatusMessage("‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.");
                updateUI();
            }
        }

        // –ë–æ—Ç –∞—Ç–∞–∫—É–µ—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è)
        function botAttack() {
            if (isPlayerTurn || gameOver) return;
            
            updateStatusMessage("ü§ñ –ë–æ—Ç –∞—Ç–∞–∫—É–µ—Ç...");
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –±–æ—Ç –¥–µ–ª–∞–µ—Ç —Ö–æ–¥
            setTimeout(() => {
                // –ë–æ—Ç –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ä—Ç—É –¥–ª—è –∞—Ç–∞–∫–∏
                let selectedCardIndex = -1;
                
                // –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
                if (botLevel === 'easy') {
                    // –õ–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: —Å–ª—É—á–∞–π–Ω–∞—è –∫–∞—Ä—Ç–∞
                    if (attackCards.length === 0) {
                        // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞: —Å–ª—É—á–∞–π–Ω–∞—è –∫–∞—Ä—Ç–∞
                        if (botHand.length > 0) {
                            selectedCardIndex = Math.floor(Math.random() * botHand.length);
                        }
                    } else {
                        // –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏: –∫–∞—Ä—Ç—ã —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –∏ –Ω–∞ —Å—Ç–æ–ª–µ
                        const tableValues = [...attackCards, ...defendCards].map(card => card.value);
                        const possibleCards = [];
                        
                        for (let i = 0; i < botHand.length; i++) {
                            if (tableValues.includes(botHand[i].value)) {
                                possibleCards.push(i);
                            }
                        }
                        
                        if (possibleCards.length > 0) {
                            selectedCardIndex = possibleCards[Math.floor(Math.random() * possibleCards.length)];
                        }
                    }
                } else if (botLevel === 'medium') {
                    // –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å: —Å–∞–º–∞—è –º–ª–∞–¥—à–∞—è –∫–∞—Ä—Ç–∞
                    if (attackCards.length === 0) {
                        // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞: —Å–∞–º–∞—è –º–ª–∞–¥—à–∞—è –∫–∞—Ä—Ç–∞
                        for (let i = 0; i < botHand.length; i++) {
                            if (selectedCardIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[selectedCardIndex].value)) {
                                selectedCardIndex = i;
                            }
                        }
                    } else {
                        // –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏: —Å–∞–º–∞—è –º–ª–∞–¥—à–∞—è –∫–∞—Ä—Ç–∞ —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞
                        const tableValues = [...attackCards, ...defendCards].map(card => card.value);
                        let minCardIndex = -1;
                        
                        for (let i = 0; i < botHand.length; i++) {
                            if (tableValues.includes(botHand[i].value)) {
                                if (minCardIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[minCardIndex].value)) {
                                    minCardIndex = i;
                                }
                            }
                        }
                        
                        selectedCardIndex = minCardIndex;
                    }
                } else {
                    // –°–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
                    if (attackCards.length === 0) {
                        // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞: —Å–∞–º–∞—è –º–ª–∞–¥—à–∞—è –Ω–µ–∫–æ–∑—ã—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞
                        let minNonTrumpIndex = -1;
                        for (let i = 0; i < botHand.length; i++) {
                            if (botHand[i].suit !== trumpSuit) {
                                if (minNonTrumpIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[minNonTrumpIndex].value)) {
                                    minNonTrumpIndex = i;
                                }
                            }
                        }
                        
                        // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                        if (minNonTrumpIndex === -1) {
                            // –°–∞–º–∞—è –º–ª–∞–¥—à–∞—è –∫–æ–∑—ã—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞
                            for (let i = 0; i < botHand.length; i++) {
                                if (selectedCardIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[selectedCardIndex].value)) {
                                    selectedCardIndex = i;
                                }
                            }
                        } else {
                            selectedCardIndex = minNonTrumpIndex;
                        }
                    } else {
                        // –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏: —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
                        const tableValues = [...attackCards, ...defendCards].map(card => card.value);
                        let bestCardIndex = -1;
                        
                        // 1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –º–ª–∞–¥—à–∏–µ –Ω–µ–∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                        for (let i = 0; i < botHand.length; i++) {
                            if (tableValues.includes(botHand[i].value) && botHand[i].suit !== trumpSuit) {
                                if (bestCardIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[bestCardIndex].value)) {
                                    bestCardIndex = i;
                                }
                            }
                        }
                        
                        // 2. –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç –º–ª–∞–¥—à–∏–µ –∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                        if (bestCardIndex === -1) {
                            for (let i = 0; i < botHand.length; i++) {
                                if (tableValues.includes(botHand[i].value)) {
                                    if (bestCardIndex === -1 || cardValues.indexOf(botHand[i].value) < cardValues.indexOf(botHand[bestCardIndex].value)) {
                                        bestCardIndex = i;
                                    }
                                }
                            }
                        }
                        
                        selectedCardIndex = bestCardIndex;
                    }
                }
                
                // –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –Ω–µ –º–æ–∂–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å
                if (selectedCardIndex === -1) {
                    updateStatusMessage("ü§ñ –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å. –í–∞—à —Ö–æ–¥.");
                    isPlayerTurn = true;
                    isAttackPhase = true;
                    playerHasActed = false;
                    updateUI();
                    return;
                }
                
                // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É –≤ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏
                const selectedCard = botHand[selectedCardIndex];
                attackCards.push(selectedCard);
                botHand.splice(selectedCardIndex, 1);
                gameStatistics.totalCardsPlayed++;
                
                updateStatusMessage(`ü§ñ –ë–æ—Ç –∞—Ç–∞–∫–æ–≤–∞–ª: ${selectedCard.value} ${suitSymbols[selectedCard.suit]}. –í–∞—à–∞ –æ—á–µ—Ä–µ–¥—å –∑–∞—â–∏—â–∞—Ç—å—Å—è.`);
                playSound('card');
                
                isPlayerTurn = true;
                isAttackPhase = false;
                playerHasActed = false;
                
                updateUI();
            }, 1000);
        }

        // –ë–æ—Ç –∑–∞—â–∏—â–∞–µ—Ç—Å—è (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è)
        function botDefend() {
            if (isPlayerTurn || gameOver) return;
            
            updateStatusMessage("ü§ñ –ë–æ—Ç –∑–∞—â–∏—â–∞–µ—Ç—Å—è...");
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –±–æ—Ç –¥–µ–ª–∞–µ—Ç —Ö–æ–¥
            setTimeout(() => {
                // –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏
                let allDefended = true;
                
                for (let i = defendCards.length; i < attackCards.length; i++) {
                    const attackingCard = attackCards[i];
                    let defendingCardIndex = -1;
                    
                    // –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞—â–∏—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
                    if (botLevel === 'easy') {
                        // –õ–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: –ø–µ—Ä–≤–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞—Ä—Ç–∞
                        for (let j = 0; j < botHand.length; j++) {
                            const card = botHand[j];
                            if (canDefend(attackingCard, card)) {
                                defendingCardIndex = j;
                                break;
                            }
                        }
                    } else if (botLevel === 'medium') {
                        // –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å: —Å–∞–º–∞—è –º–ª–∞–¥—à–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞—Ä—Ç–∞
                        for (let j = 0; j < botHand.length; j++) {
                            const card = botHand[j];
                            if (canDefend(attackingCard, card)) {
                                if (defendingCardIndex === -1 || cardValues.indexOf(card.value) < cardValues.indexOf(botHand[defendingCardIndex].value)) {
                                    defendingCardIndex = j;
                                }
                            }
                        }
                    } else {
                        // –°–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞
                        // 1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –º–ª–∞–¥—à–∏–µ –Ω–µ–∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                        let minNonTrumpIndex = -1;
                        for (let j = 0; j < botHand.length; j++) {
                            const card = botHand[j];
                            if (canDefend(attackingCard, card) && card.suit !== trumpSuit) {
                                if (minNonTrumpIndex === -1 || cardValues.indexOf(card.value) < cardValues.indexOf(botHand[minNonTrumpIndex].value)) {
                                    minNonTrumpIndex = j;
                                }
                            }
                        }
                        
                        if (minNonTrumpIndex !== -1) {
                            defendingCardIndex = minNonTrumpIndex;
                        } else {
                            // 2. –í—ã–±–∏—Ä–∞–µ—Ç –º–ª–∞–¥—à—É—é –∫–æ–∑—ã—Ä–Ω—É—é –∫–∞—Ä—Ç—É
                            for (let j = 0; j < botHand.length; j++) {
                                const card = botHand[j];
                                if (canDefend(attackingCard, card)) {
                                    if (defendingCardIndex === -1 || cardValues.indexOf(card.value) < cardValues.indexOf(botHand[defendingCardIndex].value)) {
                                        defendingCardIndex = j;
                                    }
                                }
                            }
                        }
                    }
                    
                    // –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞—Ä—Ç–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã
                    if (defendingCardIndex !== -1) {
                        const defendingCard = botHand[defendingCardIndex];
                        defendCards.push(defendingCard);
                        botHand.splice(defendingCardIndex, 1);
                        gameStatistics.totalCardsPlayed++;
                        
                        updateStatusMessage(`ü§ñ –ë–æ—Ç –∑–∞—â–∏—Ç–∏–ª—Å—è: ${attackingCard.value}${suitSymbols[attackingCard.suit]} ‚Üí ${defendingCard.value}${suitSymbols[defendingCard.suit]}`);
                    } else {
                        // –ù–µ –º–æ–∂–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å—Å—è, –¥–æ–ª–∂–µ–Ω –≤–∑—è—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã
                        updateStatusMessage("ü§ñ –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –∏ –±–µ—Ä–µ—Ç –≤—Å–µ –∫–∞—Ä—Ç—ã.");
                        botHand = botHand.concat(attackCards, defendCards);
                        attackCards = [];
                        defendCards = [];
                        allDefended = false;
                        playSound('card');
                        break;
                    }
                }
                
                if (allDefended) {
                    // –í—Å–µ –∫–∞—Ä—Ç—ã –∞—Ç–∞–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã
                    updateStatusMessage("ü§ñ –ë–æ—Ç –∑–∞—â–∏—Ç–∏–ª—Å—è –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç –∞—Ç–∞–∫–∏. –¢–µ–ø–µ—Ä—å –≤–∞—à —Ö–æ–¥.");
                    
                    // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫–∏
                    refillHands();
                    
                    // –ü–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –∏–≥—Ä–æ–∫—É
                    isPlayerTurn = true;
                    isAttackPhase = true;
                    playerHasActed = false;
                    
                    updateUI();
                } else {
                    // –ë–æ—Ç –≤–∑—è–ª –∫–∞—Ä—Ç—ã, —Ç–µ–ø–µ—Ä—å —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞
                    updateStatusMessage("ü§ñ –ë–æ—Ç –≤–∑—è–ª –∫–∞—Ä—Ç—ã. –¢–µ–ø–µ—Ä—å –≤–∞—à —Ö–æ–¥.");
                    
                    // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫–∏
                    refillHands();
                    
                    // –ü–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ –∏–≥—Ä–æ–∫—É
                    isPlayerTurn = true;
                    isAttackPhase = true;
                    playerHasActed = false;
                    
                    updateUI();
                }
            }, 1000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É
        function showHint() {
            if (!isPlayerTurn || gameOver || playerHasActed) return;
            
            if (isAttackPhase) {
                // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ñ–∞–∑—ã –∞—Ç–∞–∫–∏
                if (attackCards.length === 0) {
                    updateStatusMessage("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –ø–µ—Ä–≤–æ–π –∞—Ç–∞–∫–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –º–ª–∞–¥—à—É—é –∫–∞—Ä—Ç—É. –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–∑—ã—Ä–∏.");
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å –ª—É—á—à—É—é –∫–∞—Ä—Ç—É
                    let bestCardIndex = -1;
                    for (let i = 0; i < playerHand.length; i++) {
                        if (playerHand[i].suit !== trumpSuit) {
                            if (bestCardIndex === -1 || cardValues.indexOf(playerHand[i].value) < cardValues.indexOf(playerHand[bestCardIndex].value)) {
                                bestCardIndex = i;
                            }
                        }
                    }
                    
                    // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–∑—ã—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
                    if (bestCardIndex === -1) {
                        bestCardIndex = 0;
                    }
                    
                    // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∫–∞—Ä—Ç—É
                    highlightSpecificCard(bestCardIndex, '#4CAF50');
                } else {
                    updateStatusMessage("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –∏ –Ω–∞ —Å—Ç–æ–ª–µ. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –º–ª–∞–¥—à–∏–µ –∫–∞—Ä—Ç—ã.");
                }
            } else {
                // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ñ–∞–∑—ã –∑–∞—â–∏—Ç—ã
                if (attackCards.length > defendCards.length) {
                    const attackingCard = attackCards[defendCards.length];
                    updateStatusMessage(`üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç ${attackingCard.value}${suitSymbols[attackingCard.suit]} –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –±–æ–ª—å—à–µ–≥–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ —Ç–æ–π –∂–µ –º–∞—Å—Ç–∏ –∏–ª–∏ –∫–æ–∑—ã—Ä—å.`);
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å –ª—É—á—à—É—é –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
                    let bestDefenseIndex = -1;
                    for (let i = 0; i < playerHand.length; i++) {
                        if (canDefend(attackingCard, playerHand[i])) {
                            if (bestDefenseIndex === -1 || cardValues.indexOf(playerHand[i].value) < cardValues.indexOf(playerHand[bestDefenseIndex].value)) {
                                bestDefenseIndex = i;
                            }
                        }
                    }
                    
                    if (bestDefenseIndex !== -1) {
                        highlightSpecificCard(bestDefenseIndex, '#2196F3');
                    }
                }
            }
            playSound('click');
        }
        
        // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–∞—Ä—Ç—É
        function highlightSpecificCard(index, color) {
            const playerCardsContainer = document.getElementById('player-cards');
            const cards = playerCardsContainer.querySelectorAll('.card');
            
            if (cards[index]) {
                const card = cards[index];
                card.style.boxShadow = `0 0 20px ${color}`;
                card.style.border = `3px solid ${color}`;
                card.style.transform = 'translateY(-10px)';
                
                // –£–±—Ä–∞—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    updateUI();
                }, 3000);
            }
        }

        // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫–∏ –∫–∞—Ä—Ç–∞–º–∏
        function refillHands() {
            // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫—É –∏–≥—Ä–æ–∫–∞
            while (playerHand.length < 6 && deck.length > 0) {
                playerHand.push(deck.shift());
            }
            
            // –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Ä—É–∫—É –±–æ—Ç–∞
            while (botHand.length < 6 && deck.length > 0) {
                botHand.push(deck.shift());
            }
        }

        // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä —Ö–æ–¥–∞
        function startTurnTimer() {
            turnTimer = 30;
            document.getElementById('timer').textContent = turnTimer;
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (!gameOver && isPlayerTurn) {
                    turnTimer--;
                    document.getElementById('timer').textContent = turnTimer;
                    
                    if (turnTimer <= 10) {
                        document.getElementById('turn-timer').style.borderColor = '#F44336';
                        document.getElementById('turn-timer').style.backgroundColor = 'rgba(244, 67, 54, 0.3)';
                    }
                    
                    if (turnTimer <= 0) {
                        clearInterval(timerInterval);
                        updateStatusMessage("‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ–¥.");
                        
                        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∫–∞—Ä—Ç—ã
                        if (isAttackPhase && attackCards.length === 0) {
                            autoSelectCard();
                            setTimeout(() => {
                                if (selectedCardIndex !== -1) {
                                    playerAttack();
                                } else {
                                    playerTake();
                                }
                            }, 500);
                        } else if (!isAttackPhase && defendCards.length < attackCards.length) {
                            autoSelectCard();
                            setTimeout(() => {
                                if (selectedCardIndex !== -1) {
                                    playerDefend();
                                } else {
                                    playerTake();
                                }
                            }, 500);
                        } else {
                            playerReady();
                        }
                    }
                }
            }, 1000);
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫–æ–Ω—á–∞–Ω–∏–µ –∏–≥—Ä—ã
        function checkGameEnd() {
            // –ï—Å–ª–∏ –≤ –∫–æ–ª–æ–¥–µ –Ω–µ—Ç –∫–∞—Ä—Ç –∏ —É –æ–¥–Ω–æ–≥–æ –∏–∑ –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ—Ç –∫–∞—Ä—Ç
            if (deck.length === 0) {
                if (playerHand.length === 0 && botHand.length === 0) {
                    showGameResult("ü§ù –ù–∏—á—å—è! –û–±–∞ –∏–≥—Ä–æ–∫–∞ –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∫–∞—Ä—Ç.");
                    gameStatistics.draws++;
                    return true;
                } else if (playerHand.length === 0) {
                    showGameResult("üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–±–µ–¥–∏–ª–∏!");
                    gameStatistics.wins++;
                    gameStatistics.currentStreak++;
                    if (gameStatistics.currentStreak > gameStatistics.bestWinStreak) {
                        gameStatistics.bestWinStreak = gameStatistics.currentStreak;
                    }
                    playSound('win');
                    return true;
                } else if (botHand.length === 0) {
                    showGameResult("ü§ñ –ê–∫—Ç–∏–ª–µ–∫ –ø–æ–±–µ–¥–∏–ª. –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –ø–æ–≤–µ–∑–µ—Ç!");
                    gameStatistics.losses++;
                    gameStatistics.currentStreak = 0;
                    return true;
                }
            }
            
            return false;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥—Ä—ã
        function showGameResult(message) {
            gameOver = true;
            gameStatistics.totalGames++;
            
            if (timerInterval) clearInterval(timerInterval);
            
            document.getElementById('result-message').textContent = message;
            document.getElementById('game-result').classList.remove('hidden');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        function showStatistics() {
            const winRate = gameStatistics.totalGames > 0 
                ? Math.round((gameStatistics.wins / gameStatistics.totalGames) * 100) 
                : 0;
            
            document.getElementById('total-games').textContent = gameStatistics.totalGames;
            document.getElementById('wins').textContent = gameStatistics.wins;
            document.getElementById('losses').textContent = gameStatistics.losses;
            document.getElementById('draws').textContent = gameStatistics.draws;
            document.getElementById('win-rate').textContent = winRate + '%';
            document.getElementById('best-streak').textContent = gameStatistics.bestWinStreak;
            document.getElementById('total-cards-played').textContent = gameStatistics.totalCardsPlayed;
            
            document.getElementById('game-result').classList.add('hidden');
            document.getElementById('statistics-window').classList.remove('hidden');
            playSound('click');
        }

        // –ó–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        function closeStatistics() {
            document.getElementById('statistics-window').classList.add('hidden');
            document.getElementById('game-result').classList.remove('hidden');
            playSound('click');
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        function updateStatusMessage(message) {
            document.getElementById('status-message').textContent = message;
        }

        // –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
        function startNewGame() {
            document.getElementById('game-result').classList.add('hidden');
            document.getElementById('statistics-window').classList.add('hidden');
            initGame();
        }

        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ localStorage
            const savedStats = localStorage.getItem('foolGameStatistics');
            if (savedStats) {
                gameStatistics = JSON.parse(savedStats);
            }
            
            initGame();
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞
            setTimeout(() => {
                toggleRules();
            }, 500);
            
            // –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('foolGameStatistics', JSON.stringify(gameStatistics));
            });
        };
    </script>

</body></html>